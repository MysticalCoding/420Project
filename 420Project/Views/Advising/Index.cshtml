<!-- Advising Index -->


@using _420Project.Models;
@model IEnumerable<Student>

@{
    ViewBag.Title = "Index";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

@section css{
    <link href="~/Content/Advising.css" rel="stylesheet" />
}

<!-- Toolbar: Removed from production -->
@*
    @section context{
    <div id="advising-status-filter" class="col-xs-2">
        <a href="/Dashboard" class="btn btn-default"><span class="glyphicon glyphicon-arrow-left"></span> Back</a>
    </div>
    <div id="advising-status-filter" class="col-xs-2">
        <div class="btn btn-danger disabled"><span class="glyphicon glyphicon-filter"></span> Filter</div>
    </div>

    <div id="advising-status-filter" class="col-xs-3">
        <input type="text" class="form-control" placeholder="Enter name here...">
    </div>

    <div id="advising-program-filter" class="col-xs-3">
        <p class="col-xs-6 text-right context-label context-div"><b>Program:</b></p>
        <div class="col-xs-6 dropdown context-div">
            <button class="btn btn-default dropdown-toggle" type="button" data-toggle="dropdown">
                All
                <span class="caret"></span>
            </button>
            <ul class="dropdown-menu">
                <li><a href="#">All</a></li>
                <li><a href="#">BSN</a></li>
                <li><a href="#">Masters</a></li>
            </ul>
        </div>
    </div>

    <div id="advising-status-filter" class="col-xs-2">
        <p class="col-xs-6 text-right context-label context-div"><b>Status:</b></p>
        <div class="col-xs-6 dropdown context-div">
            <button class="btn btn-default dropdown-toggle" type="button" data-toggle="dropdown">
                All
                <span class="caret"></span>
            </button>
            <ul class="dropdown-menu">
                <li><a href="#">None</a></li>
                <li><a href="#">Pending</a></li>
                <li><a href="#">Denied</a></li>
                <li><a href="#">Approved</a></li>
            </ul>
        </div>
    </div>
    }
*@

<!-- Set navbar to 'Advising' -->
@section navlinkadv{
    navigation-link-active
}

<script>
    $(document).ready(function () {
         
        // Loads group filters 
        $.ajax({
            type: "GET",
            url: "@(Url.Action("_GroupFilters", "GroupStuff"))",
            success: function (data) {
                $('#advising-student-group-filters').html(data);
            },
        error: function (data) {
            alert('error');

           }
          })

        // Fires when user clicks on a student
        // Updates advising area with student information
        $('#advising-student-body').on("click", ".advising-student-row", function () {
            $(".advising-student-active").removeClass("warning");
            $(".advising-student-active").removeClass("advising-student-active");
            $(this).addClass("advising-student-active");
            $(this).addClass("warning");

            $.ajax({
                type: "GET",
                url: "@(Url.Action("Advising", "Advising"))",
            success: function (data) {
                $('#advising-panel').html(data);
            },
            error: function (data) {
                alert('error');

            }
        })
        })
    })
</script>

<!-- Left Panel (Students)-->
<div class="col-xs-4">
    <div class="panel panel-default panel-main">
        <div class="panel-body">
            <div id="advising-student-group-filters">

            </div>

            <div id="advising-student-select-table">
                <table id="advising-student" class="table table-striped" data-toggle="table" data-pagination="true" data-page-size="20" data-page-list="[20,50,100,500]">
                    <thead>
                        <tr>
                            <th>Student</th>
                        </tr>
                    </thead>
                    <tbody id="advising-student-body">
                        @foreach (var s in Model)
                        {
                            <tr class="advising-student-row">
                                <td>@s.FirstName @s.LastName</td>
                            </tr>
                        }
                    </tbody>
                </table>
            </div>
        </div>
    </div>
</div>
<!-- Right Panel (Advising) -->
<div class="col-xs-8">
<div class="panel panel-default panel-main">
    <div id="advising-panel" class="panel-body">
        <div class="text-center">
            <h3 id="placeholder" class="text-center">Please Select a Student...</h3>
        </div>

    </div>  
    </div>
</div>


<script>
    $('#advising-student').bootstrapTable({

    });
</script>
